<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <meta name="theme-color" content="#0b0b10" />
  <title>One Page Surprise</title>

  <style>
    :root{
      --bg1:#0b0b10;
      --bg2:#141428;
      --card:#ffffff10;
      --card2:#ffffff14;
      --text:#f6f6fb;
      --muted:#b8b8cc;
      --accent:#ff6aa2;
      --danger:#ff4d4d;
      --ok:#4cd964;
      --radius:20px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 20% 10%, #2a1b45 0%, transparent 60%),
        radial-gradient(700px 500px at 80% 20%, #2b2b63 0%, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .shell{
      width:min(420px, 100%);
    }
    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid #ffffff1f;
      border-radius: var(--radius);
      padding:18px;
      box-shadow: 0 18px 50px #00000066;
      backdrop-filter: blur(10px);
    }
    .title{
      font-size:22px;
      line-height:1.2;
      margin:2px 0 8px;
      letter-spacing: .3px;
    }
    .subtitle{
      margin:0 0 14px;
      color:var(--muted);
      font-size:14px;
      line-height:1.55;
    }
    .divider{
      height:1px;
      background:#ffffff1f;
      margin:14px 0;
    }
    .row{ display:flex; gap:10px; }
    input{
      flex:1;
      background:#0f1020aa;
      border:1px solid #ffffff24;
      color:var(--text);
      border-radius:14px;
      padding:12px 12px;
      font-size:16px;
      outline:none;
    }
    input:focus{ border-color:#ffffff50; }
    button{
      background: linear-gradient(180deg, #ff7bb0, var(--accent));
      border:0;
      color:#160914;
      font-weight:700;
      border-radius:14px;
      padding:12px 14px;
      font-size:16px;
      min-width:92px;
      cursor:pointer;
      box-shadow: 0 10px 22px #ff6aa233;
    }
    button:active{ transform: translateY(1px); }
    .hint{
      margin:10px 2px 0;
      font-size:13px;
      color:var(--muted);
      min-height:18px;
    }
    .hint.bad{ color: var(--danger); }
    .hint.good{ color: var(--ok); }
    .hidden{ display:none; }

    .gift{
      animation: fadeUp .8s ease both;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(10px); }
      to{ opacity:1; transform: translateY(0); }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }
    .shake {
      animation: shake .28s ease;
      border-color: #ff4d4d55 !important;
    }

    .badge{
      display:inline-block;
      font-size:12px;
      color:#ffd7e7;
      border:1px solid #ffffff2a;
      background:#ffffff10;
      padding:6px 10px;
      border-radius:999px;
      margin-bottom:10px;
    }

    ul{
      margin:10px 0 0;
      padding-left:18px;
      color: var(--text);
    }
    li{ margin:8px 0; line-height:1.5; }
    .footer{
      text-align:center;
      margin-top:12px;
      color:#ffffff55;
      font-size:12px;
    }
    .linkish{
      color:#ffd1e2;
      text-decoration:underline;
      text-underline-offset:3px;
    }

    /* ===============================
       æ–°å¢ï¼šè§£é–å¾Œã€Œä¸Šæ–¹æ¨™é¡Œå€ã€å›ºå®šç½®ä¸­æ”¾å¤§
       =============================== */
    #unlocked{
      padding:0; /* è®“ header/å…§å®¹æ›´å¥½æ§åˆ¶ */
      overflow:hidden;
    }
    .u-inner{
      padding:18px;
    }

    .u-header{
      position: sticky;
      top: 0;
      z-index: 10;
      text-align:center;
      padding:14px 12px 10px;
      border-bottom:1px solid #ffffff1f;
      background: linear-gradient(180deg, #0b0b10cc, #141428aa);
      backdrop-filter: blur(10px);
    }
    .u-header .badge{
      font-size:14px;
      padding:8px 12px;
      margin-bottom:10px;
    }
    .u-header .title{
      font-size:30px;  /* æ”¾å¤§ */
      margin:0 0 6px;
      line-height:1.15;
      letter-spacing:.5px;
    }

    /* ===============================
       æ–°å¢ï¼šé›»å½±å­—å¹•å¼ã€Œä¸€å¥ä¸€é ã€+ é»æ“Šä¸‹æ–¹æ›é 
       =============================== */
    .cinema{
      min-height: 52vh;         /* æ‰‹æ©Ÿçœ‹èµ·ä¾†æ¯”è¼ƒåƒã€Œä¸€é ã€ */
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      padding:10px 8px 4px;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }

    .line{
      font-size:20px;           /* iPhone 17 Proï¼ˆå‡æƒ³å¤§è¢å¹•ï¼‰ä¹Ÿå¥½è®€ */
      line-height:1.6;
      color: var(--text);
      letter-spacing:.2px;
      max-width: 34ch;
    }

    .line.fade-in{
      animation: lineIn .35s ease both;
    }
    .line.fade-out{
      animation: lineOut .22s ease both;
    }
    @keyframes lineIn{
      from{ opacity:0; transform: translateY(10px); filter: blur(2px); }
      to{ opacity:1; transform: translateY(0); filter: blur(0); }
    }
    @keyframes lineOut{
      from{ opacity:1; transform: translateY(0); }
      to{ opacity:0; transform: translateY(-8px); }
    }

    .tap-next{
      margin-top:16px;
      font-size:13px;
      color:#ffffff77;
    }

    /* é»æ“Šå€åŸŸï¼šä¸‹æ–¹ä¸€æ¢ã€Œçœ‹èµ·ä¾†åƒæŒ‰éˆ•ä½†ä¸éœ€è¦çœŸçš„æŒ‰ã€ */
    .next-zone{
      margin-top:18px;
      width:100%;
      border-top:1px solid #ffffff14;
      padding:14px 0 4px;
      text-align:center;
      color:#ffd1e2;
      font-weight:700;
      letter-spacing:.4px;
    }
    .next-zone span{
      display:inline-block;
      padding:10px 14px;
      border-radius:999px;
      background:#ffffff10;
      border:1px solid #ffffff22;
      box-shadow: 0 10px 22px #00000022;
    }

    /* ç¦®ç‰©å€ï¼ˆæœ€å¾Œæ‰é¡¯ç¤ºï¼‰ */
    .gift-area.hidden{ display:none; }
    .gift-area{
      animation: fadeUp .6s ease both;
      padding-top:6px;
    }
  </style>
</head>

<body>
  <main class="shell">
    <!-- Locked -->
    <section id="locked" class="card">
      <div class="badge">ğŸ”’ åªçµ¦è¦ªæ„›çš„å¦³çœ‹</div>
      <h1 class="title">çµ¦å¦³çš„ä¸€å€‹å°é©šå–œ</h1>
      <p class="subtitle">
        è¼¸å…¥å¯†ç¢¼å¾Œï¼Œç¦®ç‰©å¡ç‰‡å°±æœƒå‡ºç¾ã€‚<br/>
        <span class="linkish">ï¼ˆæç¤ºï¼šé€å¦³ç¦®ç‰©çš„äººçš„è‹±æ–‡åï¼Œé¦–å­—å¤§å¯«ï¼‰</span>
      </p>

      <div class="divider"></div>

      <div class="row">
        <input id="pw" type="password" inputmode="text" autocomplete="off" placeholder="è¼¸å…¥å¯†ç¢¼" />
        <button id="btn">è§£é–</button>
      </div>
      <div id="hint" class="hint"></div>
    </section>

    <!-- Unlocked -->
    <section id="unlocked" class="card hidden gift" aria-live="polite">
      <!-- å›ºå®šåœ¨ä¸Šæ–¹çš„æ¨™é¡Œ -->
      <div class="u-header">
        <div class="badge"> ğŸ‡ 30æ­²ç”Ÿæ—¥å¿«æ¨‚ï¼My Dearâ¤ï¸ </div>
        <h2 class="title"> ğŸ‚ Happy Lily Day ğŸ‰</h2>
      </div>

      <div class="u-inner">
        <!-- é›»å½±å­—å¹•å€ -->
        <div class="cinema" id="cinema">
          <div class="line fade-in" id="line"></div>

          <div class="tap-next" id="progress"></div>

          <!-- é»æ“Šä¸‹æ–¹æ›é  -->
          <div class="next-zone" id="nextZone">
            <span>é»é€™è£¡ç¹¼çºŒ â†“</span>
          </div>
        </div>

        <!-- æœ€å¾Œæ‰å‡ºç¾ï¼šä½ çš„ç¦®ç‰© -->
        <div class="gift-area hidden" id="giftArea">
          <div class="divider"></div>

          <h3 class="title" style="font-size:18px; margin-top:0;">ä½ çš„ç¦®ç‰©</h3>
          <ul>
            <li>ğŸ SONY ç„¡ç·šå…¨ç½©è€³æ©Ÿ <br/>
              WH-1000XM5/6 è‡ªé¸å…Œæ›åˆ¸
            </li>
          </ul>

          <div class="divider"></div>

          <img
            src="228gift.jpg"
            alt="ç¦®ç‰©å¡ç‰‡"
            style="
              width: 100%;
              max-width: 320px;
              display: block;
              margin: 14px auto;
              border-radius: 16px;
              box-shadow: 0 10px 30px #00000055;
            "
          >
        </div>
      </div>
    </section>

    <div class="footer">Made with full love of mine.</div>
  </main>

  <script>
    // ====== è¨­å®šä½ çš„å¯†ç¢¼ï¼ˆè«‹æ”¹ï¼‰======
    const PASSWORD = "Kevin";

    const locked = document.getElementById("locked");
    const unlocked = document.getElementById("unlocked");
    const pw = document.getElementById("pw");
    const btn = document.getElementById("btn");
    const hint = document.getElementById("hint");

    // ====== é›»å½±å­—å¹•ï¼šä¸€å¥ä¸€é ï¼ˆç”¨ <br/> åˆ†éš”ï¼‰======
    // ä½ åªè¦æ”¹é€™æ®µæ–‡å­—ï¼Œæ›è¡Œç”¨ <br/> å°±å¥½
    const CINEMA_TEXT = `
æ­å–œä½ é•·å¤§30æ­²äº†<br/>
å¸Œæœ›ä»Šå¹´çš„ä½ ï¼š<br/>
æ›´å¿«æ¨‚<br/>
æ›´æœ‰éŒ¢<br/>
æ›´æœ‰å‹•åŠ›å»å¯¦ç¾ä½ æƒ³è¦çš„ã€‚<br/>
æˆ‘æœƒç¹¼çºŒç‰½è‘—ä½ å¾€å‰èµ°ğŸµ<br/>
ç›´åˆ°å®‡å®™ç›¡é ­ğŸ‘½
    `.trim();

    const cinema = document.getElementById("cinema");
    const lineEl = document.getElementById("line");
    const progressEl = document.getElementById("progress");
    const nextZone = document.getElementById("nextZone");
    const giftArea = document.getElementById("giftArea");

    const lines = CINEMA_TEXT
      .split("<br/>")
      .map(s => s.replace(/\n/g, "").trim())
      .filter(Boolean);

    let idx = 0;
    let showingGift = false;
    let animLock = false;

    function setHint(msg, kind){
      hint.textContent = msg || "";
      hint.className = "hint" + (kind ? (" " + kind) : "");
    }

    function unlock(){
      const v = (pw.value || "").trim();
      if(!v){
        setHint("å…ˆè¼¸å…¥å¯†ç¢¼ï½", "bad");
        pw.focus();
        return;
      }
      if(v !== PASSWORD){
        setHint("å¯†ç¢¼ä¸å°ï¼Œä½ è¦ç¢º?ï¼ˆæç¤ºï¼š5å­—ï¼‰", "bad");

        pw.classList.remove("shake");
        void pw.offsetWidth;
        pw.classList.add("shake");
        pw.select();
        setTimeout(() => pw.classList.remove("shake"), 300);
        return;
      }

      setHint("è§£é–æˆåŠŸï¼", "good");
      locked.classList.add("hidden");
      unlocked.classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });

      // åˆå§‹åŒ–ç¬¬ä¸€å¥
      idx = 0;
      showingGift = false;
      giftArea.classList.add("hidden");
      renderLine(true);
    }

    function renderLine(isFirst=false){
      if(lines.length === 0){
        // æ²’å¥å­å°±ç›´æ¥é¡¯ç¤ºç¦®ç‰©
        showGift();
        return;
      }

      // å‹•ç•«ï¼šå…ˆ fade-out å†æ›å­— fade-in
      if(!isFirst){
        lineEl.classList.remove("fade-in");
        lineEl.classList.add("fade-out");
      }

      const doSwap = () => {
        lineEl.classList.remove("fade-out");
        lineEl.textContent = lines[idx] || "";

        // é¡¯ç¤ºé€²åº¦
        progressEl.textContent = `ç¬¬ ${idx + 1} / ${lines.length} å¥`;

        // é‡æ–°è§¸ç™¼ fade-in
        lineEl.classList.remove("fade-in");
        void lineEl.offsetWidth;
        lineEl.classList.add("fade-in");
      };

      if(isFirst){
        doSwap();
      }else{
        setTimeout(doSwap, 180);
      }
    }

    function showGift(){
      showingGift = true;
      giftArea.classList.remove("hidden");
      // æŠŠã€Œç¹¼çºŒã€æç¤ºæ”¹æ‰ï¼ˆå¯é¸ï¼‰
      nextZone.querySelector("span").textContent = "çœ‹ç¦®ç‰© â†“";
      progressEl.textContent = "";
      // è®“ç•«é¢ç¨å¾®å¾€ä¸‹ï¼Œå‰›å¥½çœ‹åˆ°ã€Œä½ çš„ç¦®ç‰©ã€
      setTimeout(() => {
        giftArea.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 80);
    }

    function next(){
      if(animLock) return;
      animLock = true;
      setTimeout(() => (animLock = false), 260);

      if(showingGift){
        // å·²é¡¯ç¤ºç¦®ç‰©ï¼šå†é»å°±ä¸åšäº‹ï¼ˆæˆ–ä½ æƒ³è®“å®ƒå›åˆ°ç¬¬ä¸€å¥ä¹Ÿè¡Œï¼‰
        return;
      }

      if(idx < lines.length - 1){
        idx += 1;
        renderLine(false);
      }else{
        // æœ€å¾Œä¸€å¥å¾Œï¼Œé¡¯ç¤ºç¦®ç‰©å€
        showGift();
      }
    }

    // é»æ“Šä¸‹æ–¹å€åŸŸæ›é 
    nextZone.addEventListener("click", next);

    // ä¹Ÿæ”¯æ´é»æ•´å€‹ cinema å€ï¼ˆä½ æƒ³è¦æ›´ã€Œç„¡è…¦ã€çš„è©±å¯ç•™è‘—ï¼‰
    // cinema.addEventListener("click", (e) => {
    //   if(e.target === nextZone || nextZone.contains(e.target)) return;
    //   next();
    // });

    // éµç›¤æ”¯æ´ï¼šç©ºç™½éµ / å³æ–¹å‘éµ
    window.addEventListener("keydown", (e) => {
      if(unlocked.classList.contains("hidden")) return;
      if(e.key === " " || e.key === "ArrowRight"){
        e.preventDefault();
        next();
      }
    });

    btn.addEventListener("click", unlock);
    pw.addEventListener("keydown", (e) => {
      if(e.key === "Enter") unlock();
    });
  </script>
</body>
</html>
