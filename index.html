<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <meta name="theme-color" content="#0b0b10" />
  <title>One Page Surprise</title>

  <style>
    :root{
      --bg1:#0b0b10;
      --bg2:#141428;
      --card:#ffffff10;
      --card2:#ffffff14;
      --text:#f6f6fb;
      --muted:#b8b8cc;
      --accent:#ff6aa2;
      --danger:#ff4d4d;
      --ok:#4cd964;
      --radius:20px;

      --ring:#ffd1e2aa;
      --border:#ffffff1f;
      --shadow: 0 18px 50px #00000066;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 20% 10%, #2a1b45 0%, transparent 60%),
        radial-gradient(700px 500px at 80% 20%, #2b2b63 0%, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      overflow-x:hidden;
    }

    /* subtle grain (cheap-but-nice texture) */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.25;
    }

    .shell{ width:min(420px, 100%); }

    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position:relative;
    }

    .title{
      font-size:22px;
      line-height:1.2;
      margin:2px 0 8px;
      letter-spacing: .2px;
    }
    .subtitle{
      margin:0 0 14px;
      color:var(--muted);
      font-size:14px;
      line-height:1.65;
    }

    .divider{
      height:1px;
      background:#ffffff1f;
      margin:14px 0;
    }

    .row{ display:flex; gap:10px; align-items:stretch; }

    .sr-only{
      position:absolute !important;
      height:1px; width:1px;
      overflow:hidden;
      clip:rect(1px, 1px, 1px, 1px);
      white-space:nowrap;
    }

    input{
      flex:1;
      background:#0f1020aa;
      border:1px solid #ffffff24;
      color:var(--text);
      border-radius:14px;
      padding:12px 12px;
      font-size:16px;
      outline:none;
      transition: border-color .2s ease, box-shadow .2s ease, transform .05s ease;
    }

    input:focus{
      border-color:#ffffff65;
      box-shadow: 0 0 0 4px var(--ring);
    }

    button{
      background: linear-gradient(180deg, #ff7bb0, var(--accent));
      border:0;
      color:#160914;
      font-weight:800;
      border-radius:14px;
      padding:12px 14px;
      font-size:16px;
      min-width:92px;
      cursor:pointer;
      box-shadow: 0 10px 22px #ff6aa233;
      transition: transform .08s ease, filter .15s ease;
    }
    button:hover{ filter: brightness(1.03); }
    button:active{ transform: translateY(1px) scale(0.99); }
    button:focus{
      outline:none;
      box-shadow: 0 0 0 4px var(--ring), 0 10px 22px #ff6aa233;
    }

    .hint{
      margin:10px 2px 0;
      font-size:13px;
      color:var(--muted);
      min-height:18px;
    }
    .hint.bad{ color: var(--danger); }
    .hint.good{ color: var(--ok); }

    .hidden{ display:none; }

    .gift{
      animation: fadeUp .75s cubic-bezier(.2,.8,.2,1) both;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(10px); }
      to{ opacity:1; transform: translateY(0); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }
    .shake { animation: shake .28s ease; border-color: #ff4d4d55 !important; }

    .badge{
      display:inline-block;
      font-size:12px;
      color:#ffd7e7;
      border:1px solid #ffffff2a;
      background:#ffffff10;
      padding:6px 10px;
      border-radius:999px;
      margin-bottom:10px;
    }

    ul{ margin:10px 0 0; padding-left:18px; color: var(--text); }
    li{ margin:8px 0; line-height:1.6; }

    .footer{
      text-align:center;
      margin-top:12px;
      color:#ffffff55;
      font-size:12px;
    }

    .linkish{
      color:#ffd1e2;
      text-decoration:underline;
      text-underline-offset:3px;
    }

    .giftimg{
      width: 100%;
      max-width: 320px;
      display: block;
      margin: 14px auto;
      border-radius: 16px;
      box-shadow: 0 10px 30px #00000055;
    }

    /* Reduce motion preference */
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }
  </style>
</head>
<body>
  <main class="shell">
    <!-- Locked -->
    <section id="locked" class="card" aria-labelledby="lockTitle">
      <div class="badge">ğŸ”’ åªçµ¦è¦ªæ„›çš„å¦³çœ‹</div>
      <h1 id="lockTitle" class="title">çµ¦å¦³çš„ä¸€å€‹å°é©šå–œ</h1>
      <p class="subtitle">
        è¼¸å…¥å¯†ç¢¼å¾Œï¼Œç¦®ç‰©å¡ç‰‡å°±æœƒå‡ºç¾ã€‚<br/>
        <span class="linkish">ï¼ˆæç¤ºï¼šé€å¦³ç¦®ç‰©çš„äººçš„è‹±æ–‡åï¼Œé¦–å­—å¤§å¯«ï¼‰</span>
      </p>

      <div class="divider"></div>

      <div class="row">
        <label class="sr-only" for="pw">å¯†ç¢¼</label>
        <input id="pw" type="password" inputmode="text" autocomplete="off" placeholder="è¼¸å…¥å¯†ç¢¼" />
        <button id="btn" type="button">è§£é–</button>
      </div>

      <div id="hint" class="hint" role="status" aria-live="polite"></div>
    </section>

    <!-- Unlocked -->
    <section id="unlocked" class="card hidden gift" aria-live="polite">
      <div class="badge"> ğŸ‡ 30æ­²ç”Ÿæ—¥å¿«æ¨‚ï¼My Dearâ¤ï¸ </div>
      <h2 class="title"> ğŸ‚ Happy Lily Day ğŸ‰</h2>
      <p class="subtitle">
        æ­å–œä½ é•·å¤§30æ­²äº†ï¼Œå¸Œæœ›ä»Šå¹´çš„ä½ ï¼š <br/>
        <strong>æ›´å¿«æ¨‚ã€æ›´æœ‰éŒ¢ã€æ›´æœ‰å‹•åŠ›</strong>é”æˆä½ æƒ³è¦çš„ã€‚<br/>
        æˆ‘æœƒç¹¼çºŒç‰½è‘—ä½ å¾€å‰èµ°ğŸµ<br/>
        ç›´åˆ°å®‡å®™ç›¡é ­ğŸ‘½
      </p>

      <div class="divider"></div>

      <h3 class="title" style="font-size:18px; margin-top:0;">ä½ çš„ç¦®ç‰©</h3>
      <ul>
        <li>
          ğŸ SONY ç„¡ç·šå…¨ç½©è€³æ©Ÿ<br/>
          WH-1000XM5/6 è‡ªé¸å…Œæ›åˆ¸
        </li>
      </ul>

      <div class="divider"></div>

      <img class="giftimg" src="228gift.jpg" alt="ç¦®ç‰©å¡ç‰‡" />
    </section>

    <div class="footer">Made with full love of mine.</div>
  </main>

  <script>
    // === ä½ åªè¦æ”¹é€™è£¡ï¼šå¯†ç¢¼ï¼ˆä»ç„¶åœ¨å‰ç«¯ï¼Œä¸å¯èƒ½çœŸæ­£å®‰å…¨ï¼Œä½†è‡³å°‘ä¸è£¸å¥”ï¼‰===
    const PASSWORD_PLAIN = "Kevin";

    const locked = document.getElementById("locked");
    const unlocked = document.getElementById("unlocked");
    const pw = document.getElementById("pw");
    const btn = document.getElementById("btn");
    const hint = document.getElementById("hint");

    let tries = 0;
    let lockUntil = 0;

    function setHint(msg, kind){
      hint.textContent = msg || "";
      hint.className = "hint" + (kind ? (" " + kind) : "");
    }

    // SHA-256 hashing (built-in Web Crypto)
    async function sha256(text){
      const enc = new TextEncoder().encode(text);
      const buf = await crypto.subtle.digest("SHA-256", enc);
      return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2,"0")).join("");
    }

    let PASSWORD_HASH_PROMISE = sha256(PASSWORD_PLAIN);

    function shakeInput(){
      pw.classList.remove("shake");
      void pw.offsetWidth;
      pw.classList.add("shake");
      setTimeout(() => pw.classList.remove("shake"), 300);
    }

    async function unlock(){
      const now = Date.now();
      if(now < lockUntil){
        const sec = Math.ceil((lockUntil - now) / 1000);
        setHint(`å¤ªå¿«äº†ï½ç­‰ ${sec} ç§’å†è©¦ä¸€æ¬¡ ğŸ«£`, "bad");
        shakeInput();
        return;
      }

      const v = (pw.value || "").trim();
      if(!v){
        setHint("å…ˆè¼¸å…¥å¯†ç¢¼ï½", "bad");
        pw.focus();
        return;
      }

      const inputHash = await sha256(v);
      const passHash = await PASSWORD_HASH_PROMISE;

      if(inputHash !== passHash){
        tries += 1;

        // å°å°çš„ rate limitï¼šé€£éŒ¯ 4 æ¬¡å°±é– 8 ç§’ï¼ˆå¯è‡ªè¡Œèª¿ï¼‰
        if(tries >= 4){
          lockUntil = Date.now() + 8000;
          tries = 0;
          setHint("ä½ æ˜¯ä¸æ˜¯åœ¨å·çŒœå¯†ç¢¼ ğŸ˜¤ å…ˆå†·éœ 8 ç§’å†ä¾†ã€‚", "bad");
        }else{
          setHint("å¯†ç¢¼ä¸å°ï¼Œå†æƒ³æƒ³ï½ï¼ˆæç¤ºï¼š5 å­—ï¼‰", "bad");
        }

        shakeInput();
        pw.select();
        return;
      }

      setHint("è§£é–æˆåŠŸï¼", "good");
      locked.classList.add("hidden");
      unlocked.classList.remove("hidden");

      // è®“å°æ–¹è¦–ç·šå›åˆ°å¡ç‰‡é ‚éƒ¨ï¼ˆä½†å°Šé‡ reduced motionï¼‰
      const reduceMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      window.scrollTo({ top: 0, behavior: reduceMotion ? "auto" : "smooth" });
    }

    btn.addEventListener("click", unlock);
    pw.addEventListener("keydown", (e) => {
      if(e.key === "Enter") unlock();
    });

    // åˆå§‹æ›´è²¼å¿ƒï¼šè‡ªå‹• focus
    pw.focus();
  </script>
</body>
</html>
